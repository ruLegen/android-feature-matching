cmake_minimum_required(VERSION 3.20)
SET(PROJECT "vulkan_interactor")

project("${PROJECT}")
set(KOMPUTE_OPT_ANDROID_BUILD ON)
set(KOMPUTE_OPT_DISABLE_VK_DEBUG_LAYERS ON)
set(KOMPUTE_OPT_USE_BUILT_IN_VULKAN_HEADER OFF)


set(SHADERC_BASE_DIR ${CMAKE_CURRENT_SOURCE_DIR}/third_party/shaderc)

add_subdirectory("../../../../kompute"
        ${CMAKE_CURRENT_BINARY_DIR}/kompute_build)

file(GLOB SOURCES impl/*.cpp)
add_library(${PROJECT} SHARED ${SOURCES})

message(${CMAKE_ANDROID_NDK})
target_include_directories(${PROJECT} PUBLIC
            include
           ${SHADERC_BASE_DIR}/include)

find_library(log-lib
            vulkan
            kompute
            log)

add_library(shaderc_lib SHARED IMPORTED)
set_target_properties(shaderc_lib PROPERTIES IMPORTED_LOCATION
        ${SHADERC_BASE_DIR}/libs/c++_shared/${ANDROID_ABI}/libshaderc.a)

target_link_libraries( # Specifies the target library.
        ${PROJECT}
        vulkan
        kompute::kompute
       # cpufeatures
        log
        shaderc_lib
        jnigraphics
        ${log-lib})